user:
  mpas_app: /path/to/mpas_app
platform:
  account: me
  scheduler: slurm
mpas_init:
  boundary_conditions:
    interval_hours: 6
    length: 6
  execution:
    executable: "{{ user.mpas_app }}/exec/init_atmosphere_model"
    batchargs:
      walltime: 01:30:00
      cores: 4
    mpiargs:
      - "--ntasks=4"
    mpicmd: srun
    envcmds:
      - module use {{ user.mpas_app }}/modulefiles
      - module load build_jet_intel
  files_to_copy:
    conus.static.nc: /path/to/conus.static.nc
    conus.graph.info.part.{{mpas_init.execution["batchargs"]["cores"]}}: /path/to/conus.graph.info.part.{{mpas_init.execution["batchargs"]["cores"]}}
    conus.init.nc: /path/to/conus.init.nc
    stream_list.atmosphere.diagnostics: "{{ user.mpas_app }}/src/MPAS-Model/stream_list.atmosphere.diagnostics"
    stream_list.atmosphere.output: "{{ user.mpas_app }}/src/MPAS-Model/stream_list.atmosphere.output"
    stream_list.atmosphere.surface: "{{ user.mpas_app }}/src/MPAS-Model/stream_list.atmosphere.surface"
  files_to_link:
    CAM_ABS_DATA.DBL: "{{ user.mpas_app }}/src/MPAS-Model/CAM_ABS_DATA.DBL"
    CAM_AEROPT_DATA.DBL: "{{ user.mpas_app }}/src/MPAS-Model/CAM_AEROPT_DATA.DBL"
    GENPARM.TBL: "{{ user.mpas_app }}/src/MPAS-Model/GENPARM.TBL"
    LANDUSE.TBL: "{{ user.mpas_app }}/src/MPAS-Model/LANDUSE.TBL"
    OZONE_DAT.TBL: "{{ user.mpas_app }}/src/MPAS-Model/OZONE_DAT.TBL"
    OZONE_LAT.TBL: "{{ user.mpas_app }}/src/MPAS-Model/OZONE_LAT.TBL"
    OZONE_PLEV.TBL: "{{ user.mpas_app }}/src/MPAS-Model/OZONE_PLEV.TBL"
    RRTMG_LW_DATA: "{{ user.mpas_app }}/src/MPAS-Model/RRTMG_LW_DATA"
    RRTMG_LW_DATA.DBL: "{{ user.mpas_app }}/src/MPAS-Model/RRTMG_LW_DATA.DBL"
    RRTMG_SW_DATA: "{{ user.mpas_app }}/src/MPAS-Model/RRTMG_SW_DATA"
    RRTMG_SW_DATA.DBL: "{{ user.mpas_app }}/src/MPAS-Model/RRTMG_SW_DATA.DBL"
    SOILPARM.TBL: "{{ user.mpas_app }}/src/MPAS-Model/SOILPARM.TBL"
    VEGPARM.TBL: "{{ user.mpas_app }}/src/MPAS-Model/VEGPARM.TBL"
  namelist:
    base_file: "{{ user.mpas_app }}/src/MPAS-Model/namelist.init_atmosphere"
    update_values:
      nhyd_model:
        config_init_case: 9
      data_sources:
        config_met_prefix: FILE
        config_fg_interval: !int "{{ mpas_init.boundary_conditions['interval_hours'] * 3600 }}"
      vertical_grid:
        config_blend_bdy_terrain: true
      preproc_stages:
        config_static_interp: false
        config_native_gwd_static: false
      decomposition:
        config_block_decomp_file_prefix: conus.graph.info.part.
  run_dir: /path/to/rundir
  streams:
    path: /path/to/streams.init_atmosphere.IN
    values:
      input_filename: conus.init.nc
      output_filename: foo.nc
